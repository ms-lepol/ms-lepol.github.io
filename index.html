<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Puzzle Bouboule</title>
    <script>
    
    <script src="verifBulles.js" type="text/javascript"></script>    
        
    // la référence pour apprendre Javascript facilement : 
    //    http://www.w3schools.com/js/default.asp
    // le code ci-dessous contient les références aux pages concernées de ce site
        
    // 2D context : objet dans lequel on va réaliser les dessins (en 2D)
    // --> voir http://www.w3schools.com/jsref/dom_obj_canvas.asp
    //  pour connaître les fonctions offertes par cet objet
    
    // --> voir http://www.html5canvastutorials.com 
    //  pour tout savoir de l'utilisation des canvas
    
    // --> voir http://www.html5rocks.com/en/tutorials/canvas/performance/
    //  pour tout savoir sur l'optimisation des performances dans les canvas
    let context = null;
        
    // rectangle dans le jeu :
    // utilisation du format JSON pour définir la structure de cet objet 
    // --> voir http://www.w3schools.com/js/js_json.asp
    // c'est un format clé: valeur, similaire aux types structurés vu au S2
    let rectangle = { x: 0, y: 0, hauteur: 0, largeur: 0, couleur: "" };
                
    // clic sur la zone de jeu (coordonnées relatives au canvas)
    let clic = { x: 0, y: 0 };
    
        
    // initialisation (appelée au chargement du corps du document <body onload="init">)    
    function init() {
        // instanciation de la variable globale contenant le contexte
        context = document.getElementById("cvs").getContext("2d");
        context.width = document.getElementById("cvs").width;
        context.height = document.getElementById("cvs").height;
        
        // on associe au document des écouteurs d'événements
        // --> voir http://www.w3schools.com/js/js_events.asp
        
        // 2 écouteurs pour le clavier (appui/relâchement d'une touche)
        document.addEventListener("keydown", captureAppuiToucheClavier)
        document.addEventListener("keyup", captureRelacheToucheClavier)
        // on associe au document un écouteur d'événements souris
        document.addEventListener("click", captureClicSouris)
        // --> ces événements vont appeler les fonctions captureXYZ définies après.
                        
        // lancement de la boucle de jeu
        boucleDeJeu();
    }
    
    
    function boucleDeJeu() {
        // mise à jour de l'état du jeu
        update(Date.now());    
        // affichage de l'état du jeu
        render();
        // rappel de la boucle de jeu 
        // requestAnimationFrame est une fonction JS servant à pré-calculer le prochain affichage
        //  http://www.html5canvastutorials.com/advanced/html5-canvas-animation-stage/
        requestAnimationFrame(boucleDeJeu);
    }
    
    
    /**
     *  Mise à jour de l'état du jeu
     *  @param  d   date courante
     */
    function update(d) {
    
    }
    
    
    /**
     *  Fonction réalisant le rendu de l'état du jeu
     */
    function render() {
        // effacement de l'écran
        context.clearRect(0, 0, context.width, context.height);
    }
    
    
    /**
     *  Fonction appelée lorsqu'une touche du clavier est appuyée
     *  Associée à l'événement "keyDown"
     */
    function captureAppuiToucheClavier(event) {
        // pratique pour connaître les keyCode des touches du clavier :
        //  --> http://www.cambiaresearch.com/articles/15/javascript-key-codes
    }
    
    /**
     *  Fonction appelée lorsqu'une touche du clavier est relâchée
     *  Associée à l'événement "keyUp"
     */
    function captureRelacheToucheClavier(event) {
  
    }
        
    </script>
</head>

<body onload="init()">

    <canvas id="cvs" width="1280" height="960" style="margin: 10px auto; border: solid 1px #000;"></canvas>

</body>

</html>
